(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{7953:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return n(842)}])},842:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return f},default:function(){return v}});var r=n(4051),c=n.n(r),a=n(5893),i=n(9669),u=n.n(i),o=n(7294);function s(e,t,n,r,c,a,i){try{var u=e[a](i),o=u.value}catch(s){return void n(s)}u.done?t(o):Promise.resolve(o).then(r,c)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function i(e){s(a,r,c,i,u,"next",e)}function u(e){s(a,r,c,i,u,"throw",e)}i(void 0)}))}}function d(e){var t=e.productInfo,n=e.edit,r=t||{},i=r._id,s=r.title,d=r.desc,p=r.price,h=r.category,f=r.subcategory,v=(0,o.useState)(s||""),x=v[0],j=v[1],y=(0,o.useState)(d||""),g=y[0],m=y[1],b=(0,o.useState)(p||""),w=b[0],_=b[1],C=(0,o.useState)(h||""),k=C[0],N=C[1],S=(0,o.useState)(f||""),P=S[0],E=S[1],F=function(){var e=l(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={title:x,desc:g,price:w,category:k,subcategory:P},e.next=4,u().put("http://localhost:3000/api/products/".concat(i),t);case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=l(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("title",s),t={title:x,desc:g,price:w,category:k,subcategory:P},e.next=5,u().post("http://localhost:3000/api/products",t);case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,a.jsx)("div",{className:"addWrapper",children:(0,a.jsxs)("div",{className:"wrapper",children:[(0,a.jsx)("span",{children:"X"}),(0,a.jsxs)("h1",{children:[n?"Edit":"Add"," a new Product"]}),(0,a.jsxs)("div",{className:"item",children:[(0,a.jsx)("label",{htmlFor:"title",children:"Title"}),(0,a.jsx)("input",{type:"text",name:"title",onChange:function(e){return j(e.target.value)},placeholder:"Title",value:x}),(0,a.jsx)("label",{htmlFor:"desc",children:"Description"}),(0,a.jsx)("textarea",{type:"text",name:"desc",onChange:function(e){return m(e.target.value)},placeholder:"Description",value:g}),(0,a.jsx)("label",{htmlFor:"category",children:"Category"}),(0,a.jsx)("input",{type:"text",name:"category",onChange:function(e){return N(e.target.value)},placeholder:"Category",value:k}),(0,a.jsx)("label",{htmlFor:"subcategory",children:"Subcategory"}),(0,a.jsx)("input",{type:"text",name:"subcategory",onChange:function(e){return E(e.target.value)},placeholder:"Subcategory",value:P}),(0,a.jsx)("label",{htmlFor:"price",children:"Price"}),(0,a.jsx)("input",{type:"number",name:"price",onChange:function(e){return _(e.target.value)},placeholder:"Price",value:w})]}),(0,a.jsx)("input",{type:"button",value:"Create",onClick:n?F:T})]})})}function p(e,t,n,r,c,a,i){try{var u=e[a](i),o=u.value}catch(s){return void n(s)}u.done?t(o):Promise.resolve(o).then(r,c)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function i(e){p(a,r,c,i,u,"next",e)}function u(e){p(a,r,c,i,u,"throw",e)}i(void 0)}))}}var f=!0;function v(e){for(var t=e.products,n=(0,o.useState)(t),r=n[0],i=n[1],s=(0,o.useState)(!1),l=s[0],p=s[1],f=(0,o.useState)(!1),v=f[0],x=f[1],j=(0,o.useState)(null),y=j[0],g=j[1],m=function(e,t){var n=new Map;return e.forEach((function(e){var r=t(e),c=n.get(r);c?c.push(e):n.set(r,[e])})),n}(r,(function(e){return e.category})),b=[],w=0;w<Array.from(m).length;w++)Array.from(m)[w][1].map((function(e){return b.push(e)}));console.log("group",b);var _=function(){var e=h(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(t),p(!l);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=h(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().delete("http://localhost:3000/api/products/"+t);case 3:i(r.filter((function(e){return e._id!==t}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return(0,a.jsxs)("div",{className:"admin-container",children:[(0,a.jsxs)("div",{className:"item",children:[(0,a.jsxs)("div",{className:"heading",children:[(0,a.jsx)("h1",{children:"Products"}),(0,a.jsx)("input",{type:"button",value:"Create new product",onClick:function(){return x(!v)}})]}),(0,a.jsxs)("table",{children:[(0,a.jsx)("tbody",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"Category"}),(0,a.jsx)("th",{children:"Title"}),(0,a.jsx)("th",{children:"Price"}),(0,a.jsx)("th",{children:"Action"})]})}),b.map((function(e){return(0,a.jsx)("tbody",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"price",children:e._id}),(0,a.jsx)("td",{children:e.category}),(0,a.jsx)("td",{children:e.title}),(0,a.jsxs)("td",{children:["$",e.price]}),(0,a.jsxs)("td",{children:[(0,a.jsx)("input",{type:"button",value:"Edit",onClick:function(){return _(e)}}),(0,a.jsx)("input",{type:"button",value:"Delete",onClick:function(){return C(e._id)}})]})]})},e._id)}))]})]}),l&&(0,a.jsx)(d,{edit:!0,productInfo:y}),v&&(0,a.jsx)(d,{})]})}}},function(e){e.O(0,[669,774,888,179],(function(){return t=7953,e(e.s=t);var t}));var t=e.O();_N_E=t}]);